%\usepackage[numbers,super]{natbib}
%\usepackage{cite} % for IEEEtran
%\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{graphicx}
\usepackage{color}
\usepackage{subcaption} 
\usepackage[bottom]{footmisc}
\usepackage{amsmath}
\usepackage[noabbrev]{cleveref}
%\usepackage{autonum} % looks weird maybe optimize?
\usepackage{mdframed}
\usepackage{booktabs}
\usepackage{picins}
%\usepackage{hyperref}
%\usepackage[caption=false,font=footnotesize]{subfig}
%\usepackage{stfloats} % invasive float package

\usepackage{pgfplots}
\pgfplotsset{compat=newest}
%% the following commands are needed for some matlab2tikz features
\usetikzlibrary{plotmarks}
%\usetikzlibrary{arrows.meta}
\usepgfplotslibrary{patchplots}
\usepackage{grffile}
%\mathtoolsset{showonlyrefs=true} % incompatible with cleveref
\usepackage{sectsty}
%\usepackage{titlesec}
%\allsectionsfont{\sffamily}
\usepackage[font={small,sf}]{caption}
\sectionfont{\large}
\subsectionfont{\normalfont\large\itshape}
\paragraphfont{\normalsize}

%\titleformat{\section}{\LARGE\bfseries}
%\titleformat{\subsection}{\Large\bfseries}
%\titleformat{\subsubsection}{\large\bfseries}
%\titleformat{\paragraph}{\large\bfseries}
%\titleformat{\subparagraph}{\large\bfseries}

%% you may also want the following commands
\pgfplotsset{plot coordinates/math parser=false}
\newlength\figureheight
\newlength\figurewidth

% theorem environment
\newtheorem{prop}{Proposition}[section]
\newtheorem{theorem}{Theorem}[section]
\newtheorem{prop2}{Proposition}
\newtheorem{lem}{Lemma}
\newtheorem{ex}{Example}

% For algorithms
\usepackage{algorithm}
\usepackage{algpseudocode}
\algnewcommand\algorithmicAnd{\textbf{and} }

\newlength\myindent
\setlength\myindent{2em}
\newcommand\bindent{%
  \begingroup
  \setlength{\itemindent}{\myindent}
  \addtolength{\algorithmicindent}{\myindent}
}
\newcommand\eindent{\endgroup}

% custom commands
\newcommand{\boldvec}[1]{\boldsymbol{\mathrm{#1}}}
\let\vec\boldvec
\newcommand\at[2]{\left.#1\right|_{#2}} % the at differential sign
\newcommand\scalemath[2]{\scalebox{#1}{\mbox{\ensuremath{\displaystyle #2}}}} % scaling matrices
\newcommand{\rpm}{\raisebox{.2ex}{$\scriptstyle\pm$}} % plus minus sign
\def\CC{{C\nolinebreak[4]\hspace{-.05em}\raisebox{.4ex}{\tiny\bf ++}}}

%% custom macros
\newcommand{\diag}{\mathop{\rm diag}}
\newcommand{\Alg}{\emph{Focused Player}}
\newcommand{\alg}{\mathrm{FP}} % first player
\newcommand{\AlgTwo}{\emph{Defensive Player}}
\newcommand{\algTwo}{\mathrm{DP}} % defensive player
\newcommand{\vhp}{\mathrm{VHP}} % virtual hitting plane based method

% % % % % % % % Notation for robot % % % % % % %
\newcommand{\todo}{\textcolor{red}{TODO}} % TODO!
\newcommand{\kin}{\vec{K}} % used to denote forward kinematics
\newcommand{\jac}{\vec{J}} % jacobian
\newcommand{\joint}{\vec{q}} % used to denote robot state in joint space
\newcommand{\invdyn}{\vec{f}} % used for inverse dynamics

% pos,vel and acc constraints
\newcommand{\jointMax}{\joint_{\mathrm{max}}}
\newcommand{\jointMin}{\joint_{\mathrm{min}}}
\newcommand{\velMax}{\dot{\joint}_{\mathrm{max}}}
\newcommand{\velMin}{\dot{\joint}_{\mathrm{min}}}
\newcommand{\accMax}{\ddot{\joint}_{\mathrm{max}}}
\newcommand{\accMin}{\ddot{\joint}_{\mathrm{min}}}

% % % % % % % % Table tennis notation % % % % % %
\newcommand{\resetTime}{0.5}
\newcommand{\numBallsMin}{N} % minimum number of balls to start prediction
\newcommand{\dataset}{\mathcal{D}}
\newcommand{\ball}{\vec{b}} % ball positions
%\newcommand{\ballEst}{\vec{b}_{\mathrm{est}}} % ball estimates (provided by EKF)
\newcommand{\ballPred}{\vec{b}} % ball prediction
\newcommand{\ballLand}{\vec{b}_{\mathrm{goal}}} % desired ball landing position
\newcommand{\ballVel}{v} 
\newcommand{\drag}{C_{D}} % drag coeff
\newcommand{\lift}{C_{L}} % lift coeff
\newcommand{\spin}{\vec{\omega}} % angular velocity
\newcommand{\gravityVec}{\vec{g}}
\newcommand{\coeffFrictionTable}{\mu_t} % dynamic coeff of friction
\newcommand{\coeffRestitutionTable}{\epsilon_t} % coeff of restitution between table and ball
\newcommand{\coeffRestitutionRacket}{\epsilon_r} % coeff of restitution between racket and ball
\newcommand{\gravity}{g}
\newcommand{\bounce}{\vec{A}_t} % bounce mat of table from ballvel to ballvel 
\newcommand{\bounceSpin}{\vec{B}_t} % bounce mat from ball spin to ballvel
\newcommand{\racketContact}{\vec{A}_r} % bounce mat of racket from ballvel to ballvel
\newcommand{\racketCartContact}{\bar{\vec{A}}_r} 
\newcommand{\racketContactSpin}{\vec{B}_r} % bounce mat of racket from spin to ballvel
\newcommand{\contactModel}{\vec{F}} % contact model
\newcommand{\racket}{\vec{r}} % racket positions
\newcommand{\racketVel}{\vec{v}} % racket velocity
\newcommand{\normal}{\vec{n}} % racket normal
\newcommand{\ballRadius}{r_{B}} % ball radius
\newcommand{\racketRadius}{r_{R}} % racket radius
\newcommand{\projRacket}{\vec{P}_{n}^{\perp}} % projection to axes perpendicular to normal
\newcommand{\minball}{12}
\newcommand{\ballPosEst}{\vec{b}_0} % estimated ball positions
\newcommand{\ballVelEst}{\vec{v}_0} % estimated ball velocities
\newcommand{\weightLand}{\alpha_{\mathrm{land}}} % weights for the landing penalty in Defensive Player
\newcommand{\weightHit}{\alpha_{\mathrm{hit}}} % weights for the hitting penalty in Defensive Player

% Environment limits and table tennis events
\newcommand{\tabletennis}{\mathcal{T}} % table
\newcommand{\landEvent}{\mathcal{L}} % landing event on opponents court
\newcommand{\net}{\mathcal{N}} % net
\newcommand{\hit}{\mathcal{H}} % hitting event
\newcommand{\xtablelim}{x_{\mathrm{max}}} % x limit of table
\newcommand{\ytablelim}{y_{\mathrm{max}}} % y limit of table assuming origin is center of table
\newcommand{\ztable}{z_{T}} % height of table
\newcommand{\znet}{z_{\mathrm{net}}} % height of net
\newcommand{\zwall}{z_{\mathrm{wall}}} % height of wall

% notation for times 
\newcommand{\hitTime}{T} % hitting or striking time
\newcommand{\restTime}{T_{\mathrm{rest}}} % returning time
\newcommand{\netTime}{T_{\mathrm{net}}} % time when ball flies over the net
\newcommand{\landTime}{T_{\mathrm{land}}} % landing time on table
\newcommand{\predTime}{T_{\mathrm{pred}}} % maximum prediction time for the ball

\newcommand{\hitFun}{\vec{\Psi}_{\mathrm{hit}}} % hitting function
\newcommand{\landFun}{\vec{\Psi}_{\mathrm{land}}} % landing function
\newcommand{\netFun}{\vec{\Psi}_{\mathrm{net}}} % net function

% Maximum principle notation
\newcommand{\sysInput}{\vec{u}} % control inputs
\newcommand{\hamiltonian}{\mathcal{H}} % hamiltonian
\newcommand{\momentaPos}{\vec{\lambda}} %generalized momenta for joint positions
\newcommand{\momentaVel}{\vec{\mu}} %generalized momenta for joint velocities


% Set the paths where all figures are taken from:
\graphicspath{{Figures/}}
%\mathtoolsset{showonlyrefs} 
\newcommand{\includesvg}[1]{%
% \executeiffilenewer{#1.svg}{#1.pdf}%
% {inkscape -z -D --file=#1.svg %
% --export-pdf=#1.pdf --export-latex}%
 \input{#1.pdf_tex}%
}

\setcounter{secnumdepth}{2}
%\setcounter{tocdepth}{3}